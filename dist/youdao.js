"use strict";var{program:e}=require("commander"),o=require("cli-table2"),r=require("superagent"),n=require("@darkobits/lolcatjs"),t=require("figlet"),a=require("configstore"),c=require("chalk"),i=new a("youdaoTom"),s=868480929,y="toaijf",l=i.get("key")||s,u=i.get("keyfrom")||y,g=require("../package.json"),{version:k}=g,p=t.textSync("Youdao"),d=n.fromString("\n=========================================   \n 汤姆的youdao翻译".concat(k,"\n\n").concat(p,"\n========================================="));e.allowUnknownOption().version(d,"-V, --version").usage("translator <cmd> [input]");var m="http://fanyi.youdao.com/openapi.do?keyfrom=".concat(u,"&key=").concat(l,"&type=data&doctype=json&version=1.1");e.command("set").description("config key,keyfrom").requiredOption("-key,--key <string>","youdao api key").requiredOption("-keyfrom,--keyfrom <string>","youdao api keyfrom").action((e=>{console.log("cmd",e,e.key),i.set("key",e.key),i.set("keyfrom",e.keyfrom)})),e.command("query",{isDefault:!0}).description("translate query").action(((e,n)=>{var t,a=null===(t=n.args)||void 0===t?void 0:t.join(" ");r.get(m).query({q:a}).end(((e,r)=>{if(e)return console.log("excuse me, try again"),!1;try{if(!(e=>{try{return JSON.parse(e),!0}catch(e){return!1}})(r.text))return console.log("\n ".concat(c.red("有道翻译API出错信息:"))),console.log("\n".concat("💔".repeat(3),"来自您key的翻译API请求异常频繁，为保护其他用户的正常访问，只能暂时禁止您目前key的访问\n")),console.log("\n你可以使用 ".concat(c.red("youdaotom set -key xxx -keyfrom yyy")," 命令来配置你自己在网易申请的key和keyfrom,或者几个小时后再尝试，随着本npm包下载的用户数越多，很容易超出网易的限制\n")),!1;var n=JSON.parse(r.text),t={};n.basic?t[a]=n.basic.explains:n.translation?t[a]=n.translation:console.error("error"),console.log();var i=new o;i.push(t),console.log(i.toString())}catch(e){console.log(e.toString())}}))})),process.argv[2]||(console.log(d),e.help()),e.parse(process.argv);
//# sourceMappingURL=youdao.js.map
