"use strict";var{program:e}=require("commander"),o=require("cli-table2"),r=require("superagent"),n=require("@darkobits/lolcatjs"),t=require("figlet"),a=require("configstore"),c=require("chalk"),i=new a("youdaoTom"),s=868480929,y="toaijf",l=i.get("key")||s,u=i.get("keyfrom")||y,g=require("../package.json"),{version:k}=g,p=t.textSync("Youdao"),d=n.fromString("\n=========================================   \n æ±¤å§†çš„youdaoç¿»è¯‘".concat(k,"\n\n").concat(p,"\n========================================="));e.allowUnknownOption().version(d,"-V, --version").usage("translator <cmd> [input]");var m="http://fanyi.youdao.com/openapi.do?keyfrom=".concat(u,"&key=").concat(l,"&type=data&doctype=json&version=1.1");e.command("set").description("config key,keyfrom").requiredOption("-key,--key <string>","youdao api key").requiredOption("-keyfrom,--keyfrom <string>","youdao api keyfrom").action((e=>{console.log("cmd",e,e.key),i.set("key",e.key),i.set("keyfrom",e.keyfrom)})),e.command("query",{isDefault:!0}).description("translate query").action(((e,n)=>{var t,a=null===(t=n.args)||void 0===t?void 0:t.join(" ");r.get(m).query({q:a}).end(((e,r)=>{if(e)return console.log("excuse me, try again"),!1;try{if(!(e=>{try{return JSON.parse(e),!0}catch(e){return!1}})(r.text))return console.log("\n ".concat(c.red("æœ‰é“ç¿»è¯‘APIå‡ºé”™ä¿¡æ¯:"))),console.log("\n".concat("ğŸ’”".repeat(3),"æ¥è‡ªæ‚¨keyçš„ç¿»è¯‘APIè¯·æ±‚å¼‚å¸¸é¢‘ç¹ï¼Œä¸ºä¿æŠ¤å…¶ä»–ç”¨æˆ·çš„æ­£å¸¸è®¿é—®ï¼Œåªèƒ½æš‚æ—¶ç¦æ­¢æ‚¨ç›®å‰keyçš„è®¿é—®\n")),console.log("\nä½ å¯ä»¥ä½¿ç”¨ ".concat(c.red("youdaotom set -key xxx -keyfrom yyy")," å‘½ä»¤æ¥é…ç½®ä½ è‡ªå·±åœ¨ç½‘æ˜“ç”³è¯·çš„keyå’Œkeyfrom,æˆ–è€…å‡ ä¸ªå°æ—¶åå†å°è¯•ï¼Œéšç€æœ¬npmåŒ…ä¸‹è½½çš„ç”¨æˆ·æ•°è¶Šå¤šï¼Œå¾ˆå®¹æ˜“è¶…å‡ºç½‘æ˜“çš„é™åˆ¶\n")),!1;var n=JSON.parse(r.text),t={};n.basic?t[a]=n.basic.explains:n.translation?t[a]=n.translation:console.error("error"),console.log();var i=new o;i.push(t),console.log(i.toString())}catch(e){console.log(e.toString())}}))})),process.argv[2]||(console.log(d),e.help()),e.parse(process.argv);
//# sourceMappingURL=youdao.js.map
