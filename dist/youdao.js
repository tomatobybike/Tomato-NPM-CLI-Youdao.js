"use strict";var e=require("@darkobits/lolcatjs"),o=require("chalk"),r=require("cli-table2/src/table"),t=require("commander"),n=require("configstore"),a=require("figlet"),c=require("superagent");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=i(e),l=i(o),y=i(r),u=i(n),d=i(a),g=i(c),f=new u.default("youdaoTom"),p=868480929,m="toaijf",k=f.get("key")||p,q=f.get("keyfrom")||m,v=d.default.textSync("Youdao"),x=s.default.fromString("\n=========================================   \n æ±¤å§†çš„youdaoç¿»è¯‘".concat("1.1.2","\n\n").concat(v,"\n========================================="));t.program.allowUnknownOption().version(x,"-V, --version").usage("translator <cmd> [input]");var b="http://fanyi.youdao.com/openapi.do?keyfrom=".concat(q,"&key=").concat(k,"&type=data&doctype=json&version=1.1");t.program.command("set").description("config key,keyfrom").requiredOption("-key,--key <string>","youdao api key").requiredOption("-keyfrom,--keyfrom <string>","youdao api keyfrom").action((e=>{console.log("cmd",e,e.key),f.set("key",e.key),f.set("keyfrom",e.keyfrom)})),t.program.command("query",{isDefault:!0}).description("translate query").action(((e,o)=>{var r,t=null===(r=o.args)||void 0===r?void 0:r.join(" ");g.default.get(b).query({q:t}).end(((e,o)=>{if(e)return console.log("excuse me, try again"),!1;try{if(!(e=>{try{return JSON.parse(e),!0}catch(e){return!1}})(o.text))return console.log("\n ".concat(l.default.red("æœ‰é“ç¿»è¯‘APIå‡ºé”™ä¿¡æ¯:"))),console.log("\n".concat("ğŸ’”".repeat(3),"æ¥è‡ªæ‚¨keyçš„ç¿»è¯‘APIè¯·æ±‚å¼‚å¸¸é¢‘ç¹ï¼Œä¸ºä¿æŠ¤å…¶ä»–ç”¨æˆ·çš„æ­£å¸¸è®¿é—®ï¼Œåªèƒ½æš‚æ—¶ç¦æ­¢æ‚¨ç›®å‰keyçš„è®¿é—®\n")),console.log("\nä½ å¯ä»¥ä½¿ç”¨ ".concat(l.default.red("youdaotom set -key xxx -keyfrom yyy")," å‘½ä»¤æ¥é…ç½®ä½ è‡ªå·±åœ¨ç½‘æ˜“ç”³è¯·çš„keyå’Œkeyfrom,æˆ–è€…å‡ ä¸ªå°æ—¶åå†å°è¯•ï¼Œéšç€æœ¬npmåŒ…ä¸‹è½½çš„ç”¨æˆ·æ•°è¶Šå¤šï¼Œå¾ˆå®¹æ˜“è¶…å‡ºç½‘æ˜“çš„é™åˆ¶\n")),!1;var r=JSON.parse(o.text),n={};r.basic?n[t]=r.basic.explains:r.translation?n[t]=r.translation:console.error("error"),console.log();var a=new y.default;a.push(n),console.log(a.toString())}catch(e){console.log(e.toString())}}))})),process.argv[2]||(console.log(x),t.program.help()),t.program.parse(process.argv);
//# sourceMappingURL=youdao.js.map
